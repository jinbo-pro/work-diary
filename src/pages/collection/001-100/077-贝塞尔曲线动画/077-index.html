<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="lijinbo" />
    <meta name="cdnload" content="jquery" />
    <title>077-贝塞尔曲线动画</title>
    <style>
      .box {
        width: 30px;
        height: 30px;
        box-sizing: border-box;
        background-color: #999;
        position: absolute;
        top: 100px;
        left: 0;
      }
    </style>
  </head>

  <body>
    <a href="https://segmentfault.com/a/1190000018597975">详细记录</a>
    <div class="box"></div>
    <button onclick="run(0)">点击</button>
    <div id="stx" style="margin-left: 180px"></div>
    <script type="module" src="./077-main.js"></script>
    <script>
      function sleep(t = 500) {
        return new Promise((a) => setTimeout(a, t))
      }
      function run(i) {
        const p = twoBezier(i, [0, 100], [150, 50], [200, 200])
        const [x, y] = p
        $('.box').animate(
          {
            left: x + 'px',
            top: y + 'px'
          },
          30,
          () => {
            let next = i + 0.05
            if (next > 1) return
            run(i + 0.05)
          }
        )
      }
    </script>
  </body>
</html>
