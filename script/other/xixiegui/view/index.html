<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <link rel="icon" href="./favicon.ico" />
    <title>Document</title>
    <style>
      .max {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
      }
      .card {
        border: 1px solid #e1e1e1;
        border-radius: 4px;
        margin-bottom: 16px;
      }
      .user_title {
        text-align: center;
      }
      .attr_item_box {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 4px;
      }
      .en_key {
        font-size: 12px;
        color: #999;
      }
      .btn {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 999;
        opacity: 0.5;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <div class="btn">
        <button @click="updateHandle">保存</button>
      </div>
      <div class="max">
        <div v-for="(item, index) in list" :key="index" class="card">
          <p class="user_title">{{ item.name }}--{{ item.startIndex }}-{{ item.endIndex }}</p>
          <div v-for="e, in item.content" :key="e.key" class="attr_item_box">
            <div>{{ e.title }}<span class="en_key">{{ e.key }}</span></div>
            <input type="number" v-model="e.value" />
          </div>
        </div>
      </div>
    </div>
    <script>
      new Vue({
        el: '#app',
        data() {
          return {
            list: []
          }
        },
        created() {
          this.getList()
        },
        methods: {
          async getList() {
            const res = await fetch('/getInitData')
            this.list = await res.json()
          },
          async updateHandle() {
            const res = await fetch('/update', {
              method: 'post',
              body: JSON.stringify(this.list),
              headers: { 'Content-Type': 'application/json' }
            })
            console.log(res, '-->>> res')
          }
        }
      })
    </script>
  </body>
</html>
